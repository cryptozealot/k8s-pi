{
    "protocols": {
        "bgp": {
            "64512": {
                "parameters": {
{% set ip = groups['workers'][0].split('.')[:3]|join('.') + '.1' %}
                    "router-id": "{{ ip }}"
                },
                "neighbor": {
{% for host in groups['workers'] %}
                    "{{ host }}": {
                        "remote-as": "64512"
                    }{% if not loop.last %},{% endif %}

{% endfor %}
                }
            }
        }
    }
}
