---
- hosts: kube-master[0]
  any_errors_fatal: true
  roles:
    - download-kube-config
    - download-kubectl

- hosts: all
  any_errors_fatal: true
  roles:
    - upload-kube-config
    - upload-kubectl
    - glusterfs-client

- hosts: gfs-cluster
  any_errors_fatal: true
  roles:
    - k8s-module
    - glusterfs-server

- hosts: kube-node[0]
  any_errors_fatal: true
  roles:
    - k8s-module
    - helm
    - ark
    - metallb
    - ingress
    - dashboard
    - openvpn
    - unifi
    - port-forwarding
